extends layout

block main
  div(id="Home").Site-transform

    - var intro_data = contents.home['home_pupil_intro.json']
    - var intro_meta = intro_data.metadata    
    - var oss_data = contents.home['home_open_source.json']
    - var oss_meta = oss_data.metadata
    - var home_newsletter = contents.home['home_newsletter.json']
    - var home_newsletter_meta = home_newsletter.metadata

    //- show background image
    div.Background-img-top.Background-img-cover
      figure(class="img-placeholder" data-src="../media/images/home/slides/00.jpg")
        div(class="Background-img--full-wh img-loaded img-small" style="background-image: url('data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAUAAD/4QMbaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjlDNUQ2QTcwNUFCRjExRTZBNzMxQjg5Q0RDOTU0NUI2IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlDNUQ2QTZGNUFCRjExRTZBNzMxQjg5Q0RDOTU0NUI2IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9IkQ3NEIxQzI5QkJFOTMxNTVFRTIzNThCNkE5NzM4QTE5IiBzdFJlZjpkb2N1bWVudElEPSJENzRCMUMyOUJCRTkzMTU1RUUyMzU4QjZBOTczOEExOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv/uAA5BZG9iZQBkwAAAAAH/2wCEABIODg4QDhUQEBUeFBEUHiMaFRUaIyIZGRoZGSInHiMhISMeJycuMDMwLic+PkFBPj5BQUFBQUFBQUFBQUFBQUEBFBQUFhkWGxcXGxoWGhYaIRodHRohMSEhJCEhMT4tJycnJy0+ODszMzM7OEFBPj5BQUFBQUFBQUFBQUFBQUFBQf/AABEIAB4AKAMBIgACEQEDEQH/xAB4AAADAQEBAAAAAAAAAAAAAAAABAUGAgMBAQEBAQAAAAAAAAAAAAAAAAIBAAMQAAIBAwMCAwUJAAAAAAAAAAECAwARBCExEkEFUSITYaEyFQZxgZGxwUKiIxQRAAICAgEFAAAAAAAAAAAAAAABETEhAmFBURIDE//aAAwDAQACEQMRAD8AjN3dCSWj1O50p3D+oZIEZEjATpemIvp7B4cnk99q7XsmBIvEORY2vcaVzXEgfrxYlNnOh/0Swuol+FteLfZyWpWU7zv6gTiNtrflWozsdExB22Qn9rpKdQ5uduW1qQ+XNHxjWQgMbDQbmk9m7ZfmlRnI24tqAR7aKu5HYcaABmmOp2FqKkm8XJ6R9uy3iHqlr+BJA/CmlxGXt8itII2AZi3gRt1v0rQEydQPdUSxXJyvVLvjNz5WsEQEef4xrb2U9U56G3o7gXliRQdwQseIdZlBLR8hfcClpMTNgPrLKMmK/wDWwu38RfWrEfzKNI1i4zR20c+Q8beXTxoY5By7RgjyN6rR2sG6crffvVa7tMmjfKMnmLnZLDnsuwCkfpRWv82nj76KOBw5s//Z');")
        //- img(class="Background-img--full-wh")
      div(style="top:55%;").Site-content-container.Background-img--caption.u-textCenter
        h1.Background-img--caption-h1 Open source eye tracking.
        //- h2.Background-img--caption-h2 

    //- pupil intro row
    div(id="content-top" class="Site-content-container")
      div.Feature-container-column
        div.Grid.Grid--justifyCenter.Grid--center.Grid--alignContentCenter.Feature-row
          div.Grid-cell.Grid-cell--full
            h1.Feature-title--lg.u-padBottom--1 Pupil Platform
            p.Feature-paragraph We develop open source software and build accessible hardware for eye tracking.
          div.Grid.Grid--1of3.Grid--center.Grid--gutters
            div.Grid-cell
              figure.Feature-figure
                img(class="Feature-image" src="media/images/store_pupil/web/pupil_w120_e120.jpg")
              p.Feature-paragraph Mobile Eye Tracking
            div.Grid-cell
              figure.Feature-figure
                img(class="Feature-image" src="media/images/store_vr_ar/htcviveb.png")
              p.Feature-paragraph VR and AR Integrations
            div.Grid-cell
              figure.Feature-figure
                img(class="Feature-image" src="https://placehold.it/400x400")
              p.Feature-paragraph Open Source Software and Algorithms


    //- oss motivation row
    div.Site-gray-bkg
      div.Site-content-container
        div.Feature-container-column
          div.Grid.Grid--justifyCenter.Grid--center.Grid--alignContentCenter.Feature-row
            div.Grid-cell.Grid-cell--full.u-textCenter
              div.Feature
                h1.Feature-title--lg.u-padBottom--1 Pupil is Open Source
            div.Grid.Grid--1of3.Grid--gutters.u-textCenter.u-padBottom--2
              div.Grid-cell
                figure.Feature-figure
                  img(class="Feature-image" src="../media/images/home/icons/modular.png")
                p.Feature-paragraph #{ oss_meta.point1 }
              div.Grid-cell
                figure.Feature-figure
                  img(class="Feature-image" src="../media/images/home/icons/community.png")
                p.Feature-paragraph #{ oss_meta.point2 }
              div.Grid-cell
                figure.Feature-figure
                  img(class="Feature-image" src="../media/images/home/icons/service.png")
                p.Feature-paragraph #{ oss_meta.point3 }
            div.Grid-cell.Grid-cell--full.u-textCenter.u-padBottom--2
              div.Feature
                p.Feature-paragraph.u-textCenter The entire platform is on #[a(href="https://github.com/pupil-labs") github] and licensed under LGPLv3.
                p.Feature-paragraph.u-textCenter Check out a snapshot of the most recent activity below.
          div.Grid.Grid--justifyCenter.Grid--center
              div(id="Home-activity")
                ul(id="Home-activity-list" class="Activity")




    //- dev feed row
    //- div.Site-content-container
    //-   div.Feature-container-column

    
    //- newsletter row
    //- div.Site-gray-bkg
    div.Site-content-container
      div.Feature-container-column
        div.Grid.Grid--justifyCenter.Grid--center.Grid--alignContentCenter.Feature-row
          div.Grid-cell.Grid-cell--full
            div.Feature
              h1.Feature-title--lg.u-textCenter.u-padBottom--1 #{ home_newsletter_meta.title }
           div.Grid
              div.Grid-cell.Grid-cell--full
                p.Feature-paragraph #{ home_newsletter_meta.point1 }
              div.Grid-cell
                form(id="newsletter-form" data-parsley-validate data-parsley-focus="first")
                  input(class="Form-input Form-input--text-newsletter" id="mce-EMAIL" type="email" placeholder="#{ home_newsletter_meta.input_placeholder }" name="EMAIL" required data-parsley-trigger="focusout" data-parsley-errors-container="#news_email_error")
                  p(class="Form-error--text" id="news_email_error")
                  input(type="submit" value="submit" id="newsletter-form-submit" class="Form-input--submit")
                  label(for="newsletter-form-submit" class="Button Button--cart Button-submit-newsletter") #{ home_newsletter_meta.button }
  
    div.Site-gray-bkg
      div.Site-content-container
        div.Feature-container-column
          div.Grid.Grid--justifyCenter.Grid--center.Grid--alignContentCenter.Feature-row
            div.Grid-cell.Grid-cell--full
              div.Feature
                h1.Feature-title--lg.u-textCenter.u-padBottom--1 Recent Blog Posts
            div.Grid-cell.Grid-cell--full.u-padTop--2
              ul
              - var articles = env.helpers.getArticles(contents)
              - var articleLimit = 5
              each article,i in articles.slice(0,articleLimit)
                - var opacity = "opacity:"+String(1-(i*(1.1/articleLimit)))+";"
                li(class="Article-list-item" style=opacity)
                  article
                    header
                      h4 #{ article.title } - #[time(class="Article-time")= moment.utc(article.date).format('YYYY MMM. DD')]
                      p= article.metadata.subtitle
                      a(href=article.url class="Article-link") Read More 




