extends layout

block main
  div(id="Home")

    - var page_data = contents.home['index.json']
    - var page_meta = page_data.metadata    
    - var titleData = {'title':page_meta.title,'s1':page_meta.s1, 's2':page_meta.s2}    
    include includes/title
        
    //- Pupil 
    div.Grid.Grid--1of2
      div.Grid-cell
        div.Feature
          figure.Feature-figure
            img(class="Feature-image" src=page_meta.pupil_image alt=page_meta.pupil_image_alt)
      div.Grid-cell.Grid-cell--center
        div.Feature.Feature--padded3
          h1.Feature-title--lg.u-textCenter #{ page_meta.pupil_title }
          h2.Feature-subtitle #{ page_meta.pupil_description_1 }
          h2.Feature-subtitle #{ page_meta.pupil_description_2 }
          h2.Feature-subtitle #{ page_meta.pupil_description_3 }
          h2.Feature-subtitle!= typogr(page_meta.pupil_description_4).typogrify()
          a(href="/store" class="Button") #{ page_meta.pupil_link_text }

    //- Newsletter Update
    div.u-padTop--6
      div.Grid.Grid--1of2.Grid--gutters.Grid--center
        div.Grid-cell
          h1.Banner-title.u-textCenter=page_meta.about_title
          h2.Banner-subtitle.u-textCenter=page_meta.about_subtitle
          h2.Feature-subtitle=page_meta.about_description_1
          h2.Feature-subtitle=page_meta.about_description_2
        div.Grid-cell.Grid-cell-center
          div.Feature.Feature--padded3
            h2.Banner-subtitle Stay up to date with the latest news from Pupil Labs.
            form(id="newsletter-form" data-parsley-validate data-parsley-focus="first")
              input(class="Form-input Form-input--text-newsletter" id="mce-EMAIL" type="email" placeholder="your email address" name="EMAIL" required data-parsley-trigger="focusout" data-parsley-errors-container="#news_email_error")
              p(class="Form-error--text" id="news_email_error")
              input(type="submit" value="submit" id="newsletter-form-submit" class="Form-input--submit")
              label(for="newsletter-form-submit" class="Button Button--cart Button-submit-newsletter") Subscribe


    //- About Pupil Labs
    //- - var bannerData = {'title': page_meta.about_title,'s1': page_meta.about_subtitle}
    //- - var bannerParagraphs = [page_meta.about_description_1,page_meta.about_description_2]
    //- - var bannerBkg = "Banner-container"
    //- - var bannerSubClass = "Banner-subtitle Banner-subtitle--pad" 
    //- include includes/banner


    //- Recent Activity
    - var bannerData = {'title': page_meta.activity_title,'s1': "a snapshot of the most recent pupil labs events"}
    - var bannerBkg = "Banner-container--sm Banner--gradientBkg--reverse"
    - var bannerParagraphs = ""
    include includes/banner
    div.Feature-container--activityHome
      div.Grid.Grid--1of2.Grid--gutters-noMargin
        div.Grid-cell
          h2.u-textCenter Recent Blog Posts 
          div.Feature.Feature--padded3
            ul
            - var articles = env.helpers.getArticles(contents)
            - var articleLimit = 5
            each article,i in articles.slice(0,articleLimit)
              - var opacity = "opacity:"+String(1-(i*(1.1/articleLimit)))+";"
              li(class="Article-list-item" style=opacity)
                article
                  header
                    h4 #{ article.title } - #[time(class="Article-time")= moment.utc(article.date).format('YYYY MMM. DD')]
                    p= article.metadata.subtitle
                    a(href=article.url class="Article-link") Read More 

        div.Grid-cell
          h2.u-textCenter Development Feed 
          div(id="Home-activity" class="Feature Feature--padded3")
            ul(id="Home-activity-list" class="Activity")




