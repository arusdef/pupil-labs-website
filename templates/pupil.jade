extends layout

block append title
  | #{ " - " + page.title}

block main
  //- Title block
  div(id="Pupil")
    - var page_data = contents.pupil['index.json']
    - var page_meta = page_data.metadata
    
    //- slider 
    //- TODO - add bkg color class (not inline)
    //- TODO - pull slider images from json file and run in for loop
    div(id="slider" style="background-color: gray;" class="Grid Grid--center Grid--alignContentCenter Wallop Wallop-transform")
      div.Wallop-list
        div.Wallop-item.Wallop-item--current
          div(class="Background-img--full-w" style="background-image: url('../media/images/pupil/headset_line_drawings/30m-w.png');")
        div.Wallop-item
          div(class="Background-img--full-w" style="background-image: url('../media/images/pupil/headset_line_drawings/hshsm-w.png');")
      div.Grid-cell.u-textCenter     
        button.Wallop-buttonPrevious
          svg.Wallop-arrow-left(viewbox='0 0 180 310')
            path(d='M170 10 L10 161 M10 150 L170 300')
      div.Grid-cell.u-textCenter
        button.Wallop-buttonNext
          svg.Wallop-arrow-right(viewbox='0 0 180 310')
            path(d='M10 10 L170 161 M170 150 L10 300')
      //- pagination
      div.Grid-cell.u-textCenter.Wallop-pagination-container
        button.Wallop-dot
        button.Wallop-dot

    //- pupil intro row
    div(id="content-top" class="Site-content-container")
      div.Feature-container-column
        div.Grid.Grid--justifyCenter.Grid--center.Grid--alignContentCenter.Feature-row
          div.Grid-cell.Grid-cell--full
            div.Feature
              h1.Feature-title--lg Pupil
              h2.Feature-subtitle.u-padBottom--1 A platform for eye tracking and egocentric vision research
              p.Feature-paragraph Pupil headsets are 3D printed frames that you wear like a pair of glasses. 
              p.Feature-paragraph Cameras record your field of view and your eye movements. Data is correlated with Pupil Capture software. 
              p.Feature-paragraph Pupil is designed as a modular system to support the diverse needs and applications of researchers

    //- background image
    div.Grid
      div(class="Background-img--full-w-fixed" style="background-image: url('../media/images/home/slides/01.jpg');")

    //- software row
    div.Site-gray-bkg
      div.Site-content-container
        div.Feature-container-column
        div.Grid.Grid--justifyCenter.Grid--center.Grid--alignContentCenter.Feature-row
          div.Grid-cell.Grid-cell--full
            div.Feature
              h1.Feature-title--lg Software
              h2.Feature-subtitle.u-padBottom--1 Connect your Pupil headset to a Linux, MacOS, or Windows computer via USB 
            div.Grid.Grid--1of3
              div.Grid-cell
                h2.Feature-subtitle Capture
              div.Grid-cell
                h2.Feature-subtitle Player
              div.Grid-cell
                h2.Feature-subtitle Service

    //- open source
    div.Site-content-container
      div.Feature-container-column
      div.Grid.Grid--justifyCenter.Grid--center.Grid--alignContentCenter.Feature-row
        div.Grid-cell--1of2
          div.Feature
            h1.Feature-title--lg.u-padBottom--1 Open Source
            p.Feature-paragraph We believe in open source. All Pupil code is released with open source licenses.
            p.Feature-paragraph A lot of work went into making the software modular and accessible. The majority of the codebase is written in Python.
            p.Feature-paragraph We have developed a plugin structure that enables you to extend Pupil Capture and Pupil Player to suit your needs. 
            p.Feature-paragraph Check out the pupil repository on <a href="https://github.com/pupil-labs/pupil/" rel="noopener">Github</a>. Read developer documentation on the <a href="https://github.com/pupil-labs/pupil/wiki" rel="noopener">wiki</a>.
        div.Grid-cell--1of2
          div.Feature
            figure.Feature-figure
              img(class="Feature-image" src="../media/images/pupil_page/web/pupil_source_code.png")
 

   
   

    //- Features
    //- ====================================
    //- Configurable
    //- Software
    //- Record-Play (download links)
    //- Open Source Software

    //- Design
    //- Technical Specs
    //- Modular & Hackable
    //- Community-License
    //- - var features = _.chain(contents.pupil['features']._.pages).sortBy(function(item) {
    //- -   return item.metadata['order'];
    //- - }).value()     
    //- each feature, i in features
    //-   - var rowType = (i%2 == 0 ? 'Grid Grid--1of2 Grid--center' : 'Grid Grid--1of2 Grid--center Grid--rowReverse')
    //-   if feature.title === "Software"
    //-     a(class='anchor' name=feature.title.toLowerCase())
    //-     - var bannerData = {'title': feature.title,'s1': feature.metadata.sub}
    //-     - var bannerBkg = 'Banner-container--sm'
    //-     - var bannerImg = feature.metadata.image
    //-     - var bannerImgClass = "Feature-image--software"
    //-     include includes/banner     
    //-   else if feature.title === "record-play"
    //-     - var group = [contents.pupil.features.recordplay['record.md'],contents.pupil.features.recordplay['play.md']]    
    //-     div.Grid.Grid--1of2.Aligner
    //-       a(class='anchor' name="software-download")
    //-       each f in group 
    //-         div.Grid-cell.Aligner-item--sm
    //-           div.Feature.Feature--padded2.Aligner-item--column
    //-             div.Aligner-item--stretchHeight
    //-               h1.Feature-title--lg.u-textCenter= f.title
    //-               h2.Feature-subtitle!= f.html
                
    //-             if typeof(f.metadata.linkTxt2) !== 'undefined'
    //-               div.Grid
    //-                 div.Grid-cell--1of2
    //-                   a(href=f.metadata.link class="Button-player" target="_blank")= f.metadata.linkTxt
    //-                 div.Grid-cell--1of2
    //-                   a(href=f.metadata.link2 class="Button-dataset" target="_blank")= f.metadata.linkTxt2
    //-             else
    //-               a(href=f.metadata.link class="Button" target="_blank")= f.metadata.linkTxt

    //-   else if feature.title === "community-license"
    //-     - var group = [contents.pupil.features.communitylicense['community.md'],contents.pupil.features.communitylicense['license.md']]    
    //-     div.Grid.Grid--1of2.Grid--top
    //-       a(class='anchor' name=feature.title.toLowerCase())
    //-       each f in group 
    //-         div.Grid-cell.u-padBottom--5
    //-           div.Feature.Feature--padded2
    //-             h1.Feature-title--lg.u-textCenter= f.title
    //-             h2.Feature-subtitle!= f.html
    //-   else
    //-     a(class='anchor' name=feature.title.toLowerCase().replace(/[^A-Z0-9]+/ig, "-"))
    //-     div(class=rowType)
    //-       div.Grid-cell
    //-         div.Feature
    //-           figure.Feature-figure
    //-             - var imgSrc = (feature.metadata.image.length > 10 ? feature.metadata.image : "http://placehold.it/1000x800/")
    //-             - var imgId = "Feature-image--"+feature.title.toLowerCase().replace(/[^A-Z0-9]+/ig, "_")
    //-             img(id=imgId class="Feature-image" src=imgSrc)
    //-       div.Grid-cell.Grid-cell--center
    //-         div.Feature.Feature--padded2
    //-           h1.Feature-title--lg.u-textCenter= feature.title 
    //-           h2.Feature-subtitle!= feature.html 


